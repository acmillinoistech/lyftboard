{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","getTeamData","res","inMap","sims","Object","keys","map","key","sort","b","start","time","first","teamid","data","info","trips","revenue","forEach","sim","push","_teamid","step","inRev","rev","lyft","parseFloat","taxi","plotMain","datasets","line","total","idx","x","y","label","borderColor","COLORS","fill","cubicInterpolationMode","_loop","ctx","document","getElementById","getContext","Chart","type","options","responsive","maintainAspectRatio","legend","position","title","display","text","scales","xAxes","scaleLabel","labelString","ticks","callback","ts","moment","format","yAxes","toFixed","elements","point","radius","multiTooltipTemplate","config","db","firebase","initializeApp","database","GAME","qs","split","join","tokens","params","re","exec","decodeURIComponent","getQueryParams","location","search","game","hex","reverse","gameid","ref","once","snap","val","getResults","console","log","./config"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = {\n    apiKey: \"AIzaSyCGWEpvuy4sPR3n5xzwfATLzyMDvwE6tOY\",\n    authDomain: \"illinois-tech-acm.firebaseapp.com\",\n    databaseURL: \"https://illinois-tech-acm.firebaseio.com\",\n    projectId: \"illinois-tech-acm\",\n    storageBucket: \"illinois-tech-acm.appspot.com\",\n    messagingSenderId: \"344533734310\"\n};\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar config = require('./config');\nvar FirebaseApp = firebase.initializeApp(config);\nvar db = FirebaseApp.database();\n\nvar PARAMS = getQueryParams(document.location.search);\nvar GAME = PARAMS.game;\n\nvar PINK = '#EA38B9';\nvar PURPLE = '#422E6E';\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction getResults(gameid, callback) {\n\tdb.ref('lyft/results/' + gameid).once('value', function (snap) {\n\t\tvar val = snap.val() || {};\n\t\tcallback(val);\n\t});\n}\n\nfunction getTeamData(res) {\n\tvar inMap = res || {};\n\tvar sims = Object.keys(inMap).map(function (key) {\n\t\treturn res[key];\n\t}).sort(function (a, b) {\n\t\treturn a.start - b.start;\n\t});\n\tvar time = [];\n\tvar map = {};\n\tif (sims.length > 0) {\n\t\tvar first = sims[0];\n\t\tfor (var teamid in first.data) {\n\t\t\tif (!(teamid in map)) {\n\t\t\t\tmap[teamid] = {\n\t\t\t\t\tinfo: { teamid: teamid },\n\t\t\t\t\ttrips: [],\n\t\t\t\t\trevenue: []\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tsims.forEach(function (sim) {\n\t\t\ttime.push(sim.start);\n\t\t\tfor (var _teamid in sim.data) {\n\t\t\t\tif (_teamid in map) {\n\t\t\t\t\tvar step = sim.data[_teamid];\n\t\t\t\t\tmap[_teamid].trips.push(step.trips);\n\t\t\t\t\tvar inRev = step.revenue;\n\t\t\t\t\tvar rev = {\n\t\t\t\t\t\tlyft: parseFloat(inRev.lyft),\n\t\t\t\t\t\ttaxi: parseFloat(inRev.taxi)\n\t\t\t\t\t};\n\t\t\t\t\tmap[_teamid].revenue.push(rev);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn {\n\t\ttime: time,\n\t\tmap: map\n\t};\n}\n\nvar COLORS = 'ffe74c-ff5964-389bff-3ddeaa-542a8e-c6d0ff-7cc2f4-faa5ff-be4dbb'.split('-').map(function (hex) {\n\treturn '#' + hex;\n}).reverse();\n\nfunction plotMain(time, map) {\n\tvar datasets = [];\n\tvar i = 0;\n\n\tvar _loop = function _loop(teamid) {\n\t\tvar line = [];\n\t\tvar total = 0;\n\t\tmap[teamid].revenue.forEach(function (step, idx) {\n\t\t\ttotal += step.lyft;\n\t\t\tline.push({\n\t\t\t\tx: time[idx],\n\t\t\t\ty: total\n\t\t\t});\n\t\t});\n\t\tdatasets.push({\n\t\t\tlabel: teamid,\n\t\t\tborderColor: COLORS[i],\n\t\t\tfill: false,\n\t\t\tcubicInterpolationMode: 'monotone',\n\t\t\tdata: line\n\t\t});\n\t\ti++;\n\t};\n\n\tfor (var teamid in map) {\n\t\t_loop(teamid);\n\t}\n\tvar ctx = document.getElementById('plot1').getContext('2d');\n\tvar chart = new Chart(ctx, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tdatasets: datasets\n\t\t},\n\t\toptions: {\n\t\t\tresponsive: false,\n\t\t\tmaintainAspectRatio: true,\n\t\t\tlegend: {\n\t\t\t\tposition: 'right'\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: 'Revenue over Time'\n\t\t\t},\n\t\t\tscales: {\n\t\t\t\txAxes: [{\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tlabelString: 'Time'\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tcallback: function callback(ts) {\n\t\t\t\t\t\t\treturn moment(ts).format('M/D');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\tyAxes: [{\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tlabelString: 'Revenue ($)'\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tcallback: function callback(rev) {\n\t\t\t\t\t\t\treturn '$' + rev.toFixed(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},\n\t\t\telements: {\n\t\t\t\tpoint: {\n\t\t\t\t\tradius: 0\n\t\t\t\t}\n\t\t\t},\n\t\t\tmultiTooltipTemplate: '<%%=datasetLabel%>: $<%%=value%>'\n\t\t}\n\t});\n}\n\nif (GAME) {\n\tgetResults(GAME, function (res) {\n\t\tvar data = getTeamData(res);\n\t\tconsole.log(data);\n\t\tplotMain(data.time, data.map);\n\t});\n}\n\n},{\"./config\":1}]},{},[2])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sT0FBUCxHQUFpQjtBQUNiLFlBQVEseUNBREs7QUFFYixnQkFBWSxtQ0FGQztBQUdiLGlCQUFhLDBDQUhBO0FBSWIsZUFBVyxtQkFKRTtBQUtiLG1CQUFlLCtCQUxGO0FBTWIsdUJBQW1CO0FBTk4sQ0FBakI7Ozs7O0FDQUEsSUFBSSxTQUFTLFFBQVEsVUFBUixDQUFiO0FBQ0EsSUFBSSxjQUFjLFNBQVMsYUFBVCxDQUF1QixNQUF2QixDQUFsQjtBQUNBLElBQUksS0FBSyxZQUFZLFFBQVosRUFBVDs7QUFFQSxJQUFNLFNBQVMsZUFBZSxTQUFTLFFBQVQsQ0FBa0IsTUFBakMsQ0FBZjtBQUNBLElBQU0sT0FBTyxPQUFPLElBQXBCOztBQUVBLElBQU0sZ0JBQU47QUFDQSxJQUFNLGtCQUFOOztBQUVBLFNBQVMsY0FBVCxDQUF3QixFQUF4QixFQUE0QjtBQUMzQixNQUFLLEdBQUcsS0FBSCxDQUFTLEdBQVQsRUFBYyxJQUFkLENBQW1CLEdBQW5CLENBQUw7QUFDQSxLQUFJLFNBQVMsRUFBYjtBQUFBLEtBQ0MsTUFERDtBQUFBLEtBRUMsS0FBSyx1QkFGTjtBQUdBLFFBQU8sU0FBUyxHQUFHLElBQUgsQ0FBUSxFQUFSLENBQWhCLEVBQTZCO0FBQzVCLFNBQU8sbUJBQW1CLE9BQU8sQ0FBUCxDQUFuQixDQUFQLElBQXdDLG1CQUFtQixPQUFPLENBQVAsQ0FBbkIsQ0FBeEM7QUFDQTtBQUNELFFBQU8sTUFBUDtBQUNBOztBQUVELFNBQVMsVUFBVCxDQUFvQixNQUFwQixFQUE0QixRQUE1QixFQUFzQztBQUNyQyxJQUFHLEdBQUgsbUJBQXVCLE1BQXZCLEVBQWlDLElBQWpDLENBQXNDLE9BQXRDLEVBQStDLFVBQUMsSUFBRCxFQUFVO0FBQ3hELE1BQUksTUFBTSxLQUFLLEdBQUwsTUFBYyxFQUF4QjtBQUNBLFdBQVMsR0FBVDtBQUNBLEVBSEQ7QUFJQTs7QUFFRCxTQUFTLFdBQVQsQ0FBcUIsR0FBckIsRUFBMEI7QUFDekIsS0FBSSxRQUFRLE9BQU8sRUFBbkI7QUFDQSxLQUFJLE9BQU8sT0FBTyxJQUFQLENBQVksS0FBWixFQUFtQixHQUFuQixDQUF1QixVQUFDLEdBQUQ7QUFBQSxTQUFTLElBQUksR0FBSixDQUFUO0FBQUEsRUFBdkIsRUFBMEMsSUFBMUMsQ0FBK0MsVUFBQyxDQUFELEVBQUksQ0FBSixFQUFVO0FBQ25FLFNBQU8sRUFBRSxLQUFGLEdBQVUsRUFBRSxLQUFuQjtBQUNBLEVBRlUsQ0FBWDtBQUdBLEtBQUksT0FBTyxFQUFYO0FBQ0EsS0FBSSxNQUFNLEVBQVY7QUFDQSxLQUFJLEtBQUssTUFBTCxHQUFjLENBQWxCLEVBQXFCO0FBQ3BCLE1BQUksUUFBUSxLQUFLLENBQUwsQ0FBWjtBQUNBLE9BQUssSUFBSSxNQUFULElBQW1CLE1BQU0sSUFBekIsRUFBK0I7QUFDOUIsT0FBSSxFQUFFLFVBQVUsR0FBWixDQUFKLEVBQXNCO0FBQ3JCLFFBQUksTUFBSixJQUFjO0FBQ2IsV0FBTSxFQUFDLFFBQVEsTUFBVCxFQURPO0FBRWIsWUFBTyxFQUZNO0FBR2IsY0FBUztBQUhJLEtBQWQ7QUFLQTtBQUNEO0FBQ0QsT0FBSyxPQUFMLENBQWEsVUFBQyxHQUFELEVBQVM7QUFDckIsUUFBSyxJQUFMLENBQVUsSUFBSSxLQUFkO0FBQ0EsUUFBSyxJQUFJLE9BQVQsSUFBbUIsSUFBSSxJQUF2QixFQUE2QjtBQUM1QixRQUFJLFdBQVUsR0FBZCxFQUFtQjtBQUNsQixTQUFJLE9BQU8sSUFBSSxJQUFKLENBQVMsT0FBVCxDQUFYO0FBQ0EsU0FBSSxPQUFKLEVBQVksS0FBWixDQUFrQixJQUFsQixDQUF1QixLQUFLLEtBQTVCO0FBQ0EsU0FBSSxRQUFRLEtBQUssT0FBakI7QUFDQSxTQUFJLE1BQU07QUFDVCxZQUFNLFdBQVcsTUFBTSxJQUFqQixDQURHO0FBRVQsWUFBTSxXQUFXLE1BQU0sSUFBakI7QUFGRyxNQUFWO0FBSUEsU0FBSSxPQUFKLEVBQVksT0FBWixDQUFvQixJQUFwQixDQUF5QixHQUF6QjtBQUNBO0FBQ0Q7QUFDRCxHQWREO0FBZUE7QUFDRCxRQUFPO0FBQ04sUUFBTSxJQURBO0FBRU4sT0FBSztBQUZDLEVBQVA7QUFJQTs7QUFFRCxJQUFNLFNBQVMsaUVBQWlFLEtBQWpFLE1BQTRFLEdBQTVFLENBQWdGLFVBQUMsR0FBRDtBQUFBLGNBQWEsR0FBYjtBQUFBLENBQWhGLEVBQW9HLE9BQXBHLEVBQWY7O0FBRUEsU0FBUyxRQUFULENBQWtCLElBQWxCLEVBQXdCLEdBQXhCLEVBQTZCO0FBQzVCLEtBQUksV0FBVyxFQUFmO0FBQ0EsS0FBSSxJQUFJLENBQVI7O0FBRjRCLDRCQUduQixNQUhtQjtBQUkzQixNQUFJLE9BQU8sRUFBWDtBQUNBLE1BQUksUUFBUSxDQUFaO0FBQ0EsTUFBSSxNQUFKLEVBQVksT0FBWixDQUFvQixPQUFwQixDQUE0QixVQUFDLElBQUQsRUFBTyxHQUFQLEVBQWU7QUFDMUMsWUFBUyxLQUFLLElBQWQ7QUFDQSxRQUFLLElBQUwsQ0FBVTtBQUNULE9BQUcsS0FBSyxHQUFMLENBRE07QUFFVCxPQUFHO0FBRk0sSUFBVjtBQUlBLEdBTkQ7QUFPQSxXQUFTLElBQVQsQ0FBYztBQUNiLFVBQU8sTUFETTtBQUViLGdCQUFhLE9BQU8sQ0FBUCxDQUZBO0FBR2IsU0FBTSxLQUhPO0FBSWIsMkJBQXdCLFVBSlg7QUFLYixTQUFNO0FBTE8sR0FBZDtBQU9BO0FBcEIyQjs7QUFHNUIsTUFBSyxJQUFJLE1BQVQsSUFBbUIsR0FBbkIsRUFBd0I7QUFBQSxRQUFmLE1BQWU7QUFrQnZCO0FBQ0QsS0FBSSxNQUFNLFNBQVMsY0FBVCxDQUF3QixPQUF4QixFQUFpQyxVQUFqQyxDQUE0QyxJQUE1QyxDQUFWO0FBQ0EsS0FBSSxRQUFRLElBQUksS0FBSixDQUFVLEdBQVYsRUFBZTtBQUMxQixjQUQwQjtBQUUxQixRQUFNO0FBQ0wsYUFBVTtBQURMLEdBRm9CO0FBSzFCLFdBQVM7QUFDUixlQUFZLEtBREo7QUFFUix3QkFBcUIsSUFGYjtBQUdSLFdBQVE7QUFDUDtBQURPLElBSEE7QUFNUixVQUFPO0FBQ04sYUFBUyxJQURIO0FBRU47QUFGTSxJQU5DO0FBVVIsV0FBUTtBQUNQLFdBQU8sQ0FBQztBQUNQLGNBQVMsSUFERjtBQUVQLG1CQUZPO0FBR1AsaUJBQVk7QUFDWCxlQUFTLElBREU7QUFFWCxtQkFBYTtBQUZGLE1BSEw7QUFPUCxZQUFPO0FBQ04sZ0JBQVUsa0JBQUMsRUFBRCxFQUFRO0FBQ2pCLGNBQU8sT0FBTyxFQUFQLEVBQVcsTUFBWCxDQUFrQixLQUFsQixDQUFQO0FBQ0E7QUFISztBQVBBLEtBQUQsQ0FEQTtBQWNQLFdBQU8sQ0FBQztBQUNQLGNBQVMsSUFERjtBQUVQLG1CQUZPO0FBR1AsaUJBQVk7QUFDWCxlQUFTLElBREU7QUFFWCxtQkFBYTtBQUZGLE1BSEw7QUFPUCxZQUFPO0FBQ04sZ0JBQVUsa0JBQUMsR0FBRCxFQUFTO0FBQ2xCLG9CQUFXLElBQUksT0FBSixDQUFZLENBQVosQ0FBWDtBQUNBO0FBSEs7QUFQQSxLQUFEO0FBZEEsSUFWQTtBQXNDUixhQUFVO0FBQ1QsV0FBTztBQUNOLGFBQVE7QUFERjtBQURFLElBdENGO0FBMkNSO0FBM0NRO0FBTGlCLEVBQWYsQ0FBWjtBQW1EQTs7QUFFRCxJQUFJLElBQUosRUFBVTtBQUNULFlBQVcsSUFBWCxFQUFpQixVQUFDLEdBQUQsRUFBUztBQUN6QixNQUFJLE9BQU8sWUFBWSxHQUFaLENBQVg7QUFDQSxVQUFRLEdBQVIsQ0FBWSxJQUFaO0FBQ0EsV0FBUyxLQUFLLElBQWQsRUFBb0IsS0FBSyxHQUF6QjtBQUNBLEVBSkQ7QUFLQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBhcGlLZXk6IFwiQUl6YVN5Q0dXRXB2dXk0c1BSM241eHp3ZkFUTHp5TUR2d0U2dE9ZXCIsXG4gICAgYXV0aERvbWFpbjogXCJpbGxpbm9pcy10ZWNoLWFjbS5maXJlYmFzZWFwcC5jb21cIixcbiAgICBkYXRhYmFzZVVSTDogXCJodHRwczovL2lsbGlub2lzLXRlY2gtYWNtLmZpcmViYXNlaW8uY29tXCIsXG4gICAgcHJvamVjdElkOiBcImlsbGlub2lzLXRlY2gtYWNtXCIsXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJpbGxpbm9pcy10ZWNoLWFjbS5hcHBzcG90LmNvbVwiLFxuICAgIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjM0NDUzMzczNDMxMFwiXG59IiwibGV0IGNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZmlnJyk7XG5sZXQgRmlyZWJhc2VBcHAgPSBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGNvbmZpZyk7XG5sZXQgZGIgPSBGaXJlYmFzZUFwcC5kYXRhYmFzZSgpO1xuXG5jb25zdCBQQVJBTVMgPSBnZXRRdWVyeVBhcmFtcyhkb2N1bWVudC5sb2NhdGlvbi5zZWFyY2gpO1xuY29uc3QgR0FNRSA9IFBBUkFNUy5nYW1lO1xuXG5jb25zdCBQSU5LID0gYCNFQTM4QjlgO1xuY29uc3QgUFVSUExFID0gYCM0MjJFNkVgO1xuXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtcyhxcykge1xuXHRxcyA9IHFzLnNwbGl0KCcrJykuam9pbignICcpO1xuXHR2YXIgcGFyYW1zID0ge30sXG5cdFx0dG9rZW5zLFxuXHRcdHJlID0gL1s/Jl0/KFtePV0rKT0oW14mXSopL2c7XG5cdHdoaWxlICh0b2tlbnMgPSByZS5leGVjKHFzKSkge1xuXHRcdHBhcmFtc1tkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzFdKV0gPSBkZWNvZGVVUklDb21wb25lbnQodG9rZW5zWzJdKTtcblx0fVxuXHRyZXR1cm4gcGFyYW1zO1xufVxuXG5mdW5jdGlvbiBnZXRSZXN1bHRzKGdhbWVpZCwgY2FsbGJhY2spIHtcblx0ZGIucmVmKGBseWZ0L3Jlc3VsdHMvJHtnYW1laWR9YCkub25jZSgndmFsdWUnLCAoc25hcCkgPT4ge1xuXHRcdGxldCB2YWwgPSBzbmFwLnZhbCgpIHx8IHt9O1xuXHRcdGNhbGxiYWNrKHZhbCk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBnZXRUZWFtRGF0YShyZXMpIHtcblx0bGV0IGluTWFwID0gcmVzIHx8IHt9O1xuXHRsZXQgc2ltcyA9IE9iamVjdC5rZXlzKGluTWFwKS5tYXAoKGtleSkgPT4gcmVzW2tleV0pLnNvcnQoKGEsIGIpID0+IHtcblx0XHRyZXR1cm4gYS5zdGFydCAtIGIuc3RhcnQ7XG5cdH0pO1xuXHRsZXQgdGltZSA9IFtdO1xuXHRsZXQgbWFwID0ge307XG5cdGlmIChzaW1zLmxlbmd0aCA+IDApIHtcblx0XHRsZXQgZmlyc3QgPSBzaW1zWzBdO1xuXHRcdGZvciAobGV0IHRlYW1pZCBpbiBmaXJzdC5kYXRhKSB7XG5cdFx0XHRpZiAoISh0ZWFtaWQgaW4gbWFwKSkge1xuXHRcdFx0XHRtYXBbdGVhbWlkXSA9IHtcblx0XHRcdFx0XHRpbmZvOiB7dGVhbWlkOiB0ZWFtaWR9LFxuXHRcdFx0XHRcdHRyaXBzOiBbXSxcblx0XHRcdFx0XHRyZXZlbnVlOiBbXVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHNpbXMuZm9yRWFjaCgoc2ltKSA9PiB7XG5cdFx0XHR0aW1lLnB1c2goc2ltLnN0YXJ0KTtcblx0XHRcdGZvciAobGV0IHRlYW1pZCBpbiBzaW0uZGF0YSkge1xuXHRcdFx0XHRpZiAodGVhbWlkIGluIG1hcCkge1xuXHRcdFx0XHRcdGxldCBzdGVwID0gc2ltLmRhdGFbdGVhbWlkXTtcblx0XHRcdFx0XHRtYXBbdGVhbWlkXS50cmlwcy5wdXNoKHN0ZXAudHJpcHMpO1xuXHRcdFx0XHRcdGxldCBpblJldiA9IHN0ZXAucmV2ZW51ZTtcblx0XHRcdFx0XHRsZXQgcmV2ID0ge1xuXHRcdFx0XHRcdFx0bHlmdDogcGFyc2VGbG9hdChpblJldi5seWZ0KSxcblx0XHRcdFx0XHRcdHRheGk6IHBhcnNlRmxvYXQoaW5SZXYudGF4aSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bWFwW3RlYW1pZF0ucmV2ZW51ZS5wdXNoKHJldik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRyZXR1cm4ge1xuXHRcdHRpbWU6IHRpbWUsXG5cdFx0bWFwOiBtYXBcblx0fTtcbn1cblxuY29uc3QgQ09MT1JTID0gYGZmZTc0Yy1mZjU5NjQtMzg5YmZmLTNkZGVhYS01NDJhOGUtYzZkMGZmLTdjYzJmNC1mYWE1ZmYtYmU0ZGJiYC5zcGxpdChgLWApLm1hcCgoaGV4KSA9PiBgIyR7aGV4fWApLnJldmVyc2UoKTtcblxuZnVuY3Rpb24gcGxvdE1haW4odGltZSwgbWFwKSB7XG5cdGxldCBkYXRhc2V0cyA9IFtdO1xuXHRsZXQgaSA9IDA7XG5cdGZvciAobGV0IHRlYW1pZCBpbiBtYXApIHtcblx0XHRsZXQgbGluZSA9IFtdO1xuXHRcdGxldCB0b3RhbCA9IDA7XG5cdFx0bWFwW3RlYW1pZF0ucmV2ZW51ZS5mb3JFYWNoKChzdGVwLCBpZHgpID0+IHtcblx0XHRcdHRvdGFsICs9IHN0ZXAubHlmdDtcblx0XHRcdGxpbmUucHVzaCh7XG5cdFx0XHRcdHg6IHRpbWVbaWR4XSxcblx0XHRcdFx0eTogdG90YWxcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdGRhdGFzZXRzLnB1c2goe1xuXHRcdFx0bGFiZWw6IHRlYW1pZCxcblx0XHRcdGJvcmRlckNvbG9yOiBDT0xPUlNbaV0sXG5cdFx0XHRmaWxsOiBmYWxzZSxcblx0XHRcdGN1YmljSW50ZXJwb2xhdGlvbk1vZGU6ICdtb25vdG9uZScsXG5cdFx0XHRkYXRhOiBsaW5lXG5cdFx0fSk7XG5cdFx0aSsrO1xuXHR9XG5cdGxldCBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxvdDEnKS5nZXRDb250ZXh0KCcyZCcpO1xuXHRsZXQgY2hhcnQgPSBuZXcgQ2hhcnQoY3R4LCB7XG5cdFx0dHlwZTogYGxpbmVgLFxuXHRcdGRhdGE6IHtcblx0XHRcdGRhdGFzZXRzOiBkYXRhc2V0c1xuXHRcdH0sXG5cdFx0b3B0aW9uczoge1xuXHRcdFx0cmVzcG9uc2l2ZTogZmFsc2UsXG5cdFx0XHRtYWludGFpbkFzcGVjdFJhdGlvOiB0cnVlLFxuXHRcdFx0bGVnZW5kOiB7XG5cdFx0XHRcdHBvc2l0aW9uOiBgcmlnaHRgLFxuXHRcdFx0fSxcblx0XHRcdHRpdGxlOiB7XG5cdFx0XHRcdGRpc3BsYXk6IHRydWUsXG5cdFx0XHRcdHRleHQ6IGBSZXZlbnVlIG92ZXIgVGltZWBcblx0XHRcdH0sXG5cdFx0XHRzY2FsZXM6IHtcblx0XHRcdFx0eEF4ZXM6IFt7XG5cdFx0XHRcdFx0ZGlzcGxheTogdHJ1ZSxcblx0XHRcdFx0XHR0eXBlOiBgbGluZWFyYCxcblx0XHRcdFx0XHRzY2FsZUxhYmVsOiB7XG5cdFx0XHRcdFx0XHRkaXNwbGF5OiB0cnVlLFxuXHRcdFx0XHRcdFx0bGFiZWxTdHJpbmc6ICdUaW1lJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGlja3M6IHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrOiAodHMpID0+IHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIG1vbWVudCh0cykuZm9ybWF0KCdNL0QnKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1dLFxuXHRcdFx0XHR5QXhlczogW3tcblx0XHRcdFx0XHRkaXNwbGF5OiB0cnVlLFxuXHRcdFx0XHRcdHR5cGU6IGBsaW5lYXJgLFxuXHRcdFx0XHRcdHNjYWxlTGFiZWw6IHtcblx0XHRcdFx0XHRcdGRpc3BsYXk6IHRydWUsXG5cdFx0XHRcdFx0XHRsYWJlbFN0cmluZzogJ1JldmVudWUgKCQpJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0dGlja3M6IHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrOiAocmV2KSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBgJCR7cmV2LnRvRml4ZWQoMCl9YDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1dXG5cdFx0XHR9LFxuXHRcdFx0ZWxlbWVudHM6IHtcblx0XHRcdFx0cG9pbnQ6IHtcblx0XHRcdFx0XHRyYWRpdXM6IDBcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdG11bHRpVG9vbHRpcFRlbXBsYXRlOiBgPCUlPWRhdGFzZXRMYWJlbCU+OiAkPCUlPXZhbHVlJT5gXG5cdFx0fVxuXHR9KTtcbn1cblxuaWYgKEdBTUUpIHtcblx0Z2V0UmVzdWx0cyhHQU1FLCAocmVzKSA9PiB7XG5cdFx0bGV0IGRhdGEgPSBnZXRUZWFtRGF0YShyZXMpO1xuXHRcdGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdHBsb3RNYWluKGRhdGEudGltZSwgZGF0YS5tYXApO1xuXHR9KTtcbn1cbiJdfQ==\n"]}
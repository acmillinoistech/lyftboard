{"version":3,"sources":["main.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","2","getResults","gameid","callback","db","ref","once","snap","val","getTeamData","res","inMap","sims","Object","keys","map","key","sort","b","start","time","first","teamid","data","info","trips","revenue","forEach","sim","push","_teamid","step","inRev","rev","lyft","parseFloat","taxi","plotMain","datasets","line","total","idx","x","y","label","borderColor","COLORS","fill","cubicInterpolationMode","_loop","ctx","document","getElementById","getContext","Chart","type","options","responsive","maintainAspectRatio","legend","position","title","display","text","scales","xAxes","scaleLabel","labelString","ticks","ts","moment","format","yAxes","toFixed","elements","point","radius","multiTooltipTemplate","config","firebase","initializeApp","database","GAME","qs","split","join","tokens","params","re","exec","decodeURIComponent","getQueryParams","location","search","game","hex","reverse","auth","signInAnonymously","then","console","log","./config"],"mappings":"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","file":"../main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nmodule.exports = {\n    apiKey: \"AIzaSyCGWEpvuy4sPR3n5xzwfATLzyMDvwE6tOY\",\n    authDomain: \"illinois-tech-acm.firebaseapp.com\",\n    databaseURL: \"https://illinois-tech-acm.firebaseio.com\",\n    projectId: \"illinois-tech-acm\",\n    storageBucket: \"illinois-tech-acm.appspot.com\",\n    messagingSenderId: \"344533734310\"\n};\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar config = require('./config');\nvar FirebaseApp = firebase.initializeApp(config);\nvar db = FirebaseApp.database();\n\nvar PARAMS = getQueryParams(document.location.search);\nvar GAME = PARAMS.game;\n\nvar PINK = '#EA38B9';\nvar PURPLE = '#422E6E';\n\nfunction getQueryParams(qs) {\n\tqs = qs.split('+').join(' ');\n\tvar params = {},\n\t    tokens,\n\t    re = /[?&]?([^=]+)=([^&]*)/g;\n\twhile (tokens = re.exec(qs)) {\n\t\tparams[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);\n\t}\n\treturn params;\n}\n\nfunction getResults(gameid, callback) {\n\tdb.ref('lyft/results/' + gameid).once('value', function (snap) {\n\t\tvar val = snap.val() || {};\n\t\tcallback(val);\n\t});\n}\n\nfunction getTeamData(res) {\n\tvar inMap = res || {};\n\tvar sims = Object.keys(inMap).map(function (key) {\n\t\treturn res[key];\n\t}).sort(function (a, b) {\n\t\treturn a.start - b.start;\n\t});\n\tvar time = [];\n\tvar map = {};\n\tif (sims.length > 0) {\n\t\tvar first = sims[0];\n\t\tfor (var teamid in first.data) {\n\t\t\tif (!(teamid in map)) {\n\t\t\t\tmap[teamid] = {\n\t\t\t\t\tinfo: { teamid: teamid },\n\t\t\t\t\ttrips: [],\n\t\t\t\t\trevenue: []\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tsims.forEach(function (sim) {\n\t\t\ttime.push(sim.start);\n\t\t\tfor (var _teamid in sim.data) {\n\t\t\t\tif (_teamid in map) {\n\t\t\t\t\tvar step = sim.data[_teamid];\n\t\t\t\t\tmap[_teamid].trips.push(step.trips);\n\t\t\t\t\tvar inRev = step.revenue;\n\t\t\t\t\tvar rev = {\n\t\t\t\t\t\tlyft: parseFloat(inRev.lyft),\n\t\t\t\t\t\ttaxi: parseFloat(inRev.taxi)\n\t\t\t\t\t};\n\t\t\t\t\tmap[_teamid].revenue.push(rev);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\treturn {\n\t\ttime: time,\n\t\tmap: map\n\t};\n}\n\nvar COLORS = '#e6194b-#3cb44b-#ffe119-#0082c8-#f58231-#911eb4-#46f0f0-#f032e6-#d2f53c-#fabebe-#008080-#e6beff-#aa6e28-#fffac8-#800000-#aaffc3-#808000-#ffd8b1-#000080-#808080-#000000'.split('-').map(function (hex) {\n\treturn '' + hex;\n}).reverse();\n\nfunction plotMain(time, map) {\n\tvar datasets = [];\n\tvar i = 0;\n\n\tvar _loop = function _loop(teamid) {\n\t\tvar line = [];\n\t\tvar total = 0;\n\t\tmap[teamid].revenue.forEach(function (step, idx) {\n\t\t\ttotal += step.lyft;\n\t\t\tline.push({\n\t\t\t\tx: time[idx],\n\t\t\t\ty: total\n\t\t\t});\n\t\t});\n\t\tdatasets.push({\n\t\t\tlabel: teamid,\n\t\t\tborderColor: COLORS[i],\n\t\t\tfill: false,\n\t\t\tcubicInterpolationMode: 'monotone',\n\t\t\tdata: line\n\t\t});\n\t\ti++;\n\t};\n\n\tfor (var teamid in map) {\n\t\t_loop(teamid);\n\t}\n\tvar ctx = document.getElementById('plot1').getContext('2d');\n\tvar chart = new Chart(ctx, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tdatasets: datasets\n\t\t},\n\t\toptions: {\n\t\t\tresponsive: false,\n\t\t\tmaintainAspectRatio: true,\n\t\t\tlegend: {\n\t\t\t\tposition: 'right'\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: 'Revenue over Time'\n\t\t\t},\n\t\t\tscales: {\n\t\t\t\txAxes: [{\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tlabelString: 'Time'\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tcallback: function callback(ts) {\n\t\t\t\t\t\t\treturn moment(ts).format('M/D');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}],\n\t\t\t\tyAxes: [{\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttype: 'linear',\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tlabelString: 'Revenue ($)'\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tcallback: function callback(rev) {\n\t\t\t\t\t\t\treturn '$' + rev.toFixed(0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t},\n\t\t\telements: {\n\t\t\t\tpoint: {\n\t\t\t\t\tradius: 0\n\t\t\t\t}\n\t\t\t},\n\t\t\tmultiTooltipTemplate: '<%%=datasetLabel%>: $<%%=value%>'\n\t\t}\n\t});\n}\n\nif (GAME) {\n\tfirebase.auth().signInAnonymously().then(function () {\n\t\tgetResults(GAME, function (res) {\n\t\t\tvar data = getTeamData(res);\n\t\t\tconsole.log(data);\n\t\t\tplotMain(data.time, data.map);\n\t\t});\n\t});\n}\n\n},{\"./config\":1}]},{},[2])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE9BQU8sT0FBUCxHQUFpQjtBQUNiLFlBQVEseUNBREs7QUFFYixnQkFBWSxtQ0FGQztBQUdiLGlCQUFhLDBDQUhBO0FBSWIsZUFBVyxtQkFKRTtBQUtiLG1CQUFlLCtCQUxGO0FBTWIsdUJBQW1CO0FBTk4sQ0FBakI7Ozs7O0FDQUEsSUFBSSxTQUFTLFFBQVEsVUFBUixDQUFiO0FBQ0EsSUFBSSxjQUFjLFNBQVMsYUFBVCxDQUF1QixNQUF2QixDQUFsQjtBQUNBLElBQUksS0FBSyxZQUFZLFFBQVosRUFBVDs7QUFFQSxJQUFNLFNBQVMsZUFBZSxTQUFTLFFBQVQsQ0FBa0IsTUFBakMsQ0FBZjtBQUNBLElBQU0sT0FBTyxPQUFPLElBQXBCOztBQUVBLElBQU0sZ0JBQU47QUFDQSxJQUFNLGtCQUFOOztBQUVBLFNBQVMsY0FBVCxDQUF3QixFQUF4QixFQUE0QjtBQUMzQixNQUFLLEdBQUcsS0FBSCxDQUFTLEdBQVQsRUFBYyxJQUFkLENBQW1CLEdBQW5CLENBQUw7QUFDQSxLQUFJLFNBQVMsRUFBYjtBQUFBLEtBQ0MsTUFERDtBQUFBLEtBRUMsS0FBSyx1QkFGTjtBQUdBLFFBQU8sU0FBUyxHQUFHLElBQUgsQ0FBUSxFQUFSLENBQWhCLEVBQTZCO0FBQzVCLFNBQU8sbUJBQW1CLE9BQU8sQ0FBUCxDQUFuQixDQUFQLElBQXdDLG1CQUFtQixPQUFPLENBQVAsQ0FBbkIsQ0FBeEM7QUFDQTtBQUNELFFBQU8sTUFBUDtBQUNBOztBQUVELFNBQVMsVUFBVCxDQUFvQixNQUFwQixFQUE0QixRQUE1QixFQUFzQztBQUNyQyxJQUFHLEdBQUgsbUJBQXVCLE1BQXZCLEVBQWlDLElBQWpDLENBQXNDLE9BQXRDLEVBQStDLFVBQUMsSUFBRCxFQUFVO0FBQ3hELE1BQUksTUFBTSxLQUFLLEdBQUwsTUFBYyxFQUF4QjtBQUNBLFdBQVMsR0FBVDtBQUNBLEVBSEQ7QUFJQTs7QUFFRCxTQUFTLFdBQVQsQ0FBcUIsR0FBckIsRUFBMEI7QUFDekIsS0FBSSxRQUFRLE9BQU8sRUFBbkI7QUFDQSxLQUFJLE9BQU8sT0FBTyxJQUFQLENBQVksS0FBWixFQUFtQixHQUFuQixDQUF1QixVQUFDLEdBQUQ7QUFBQSxTQUFTLElBQUksR0FBSixDQUFUO0FBQUEsRUFBdkIsRUFBMEMsSUFBMUMsQ0FBK0MsVUFBQyxDQUFELEVBQUksQ0FBSixFQUFVO0FBQ25FLFNBQU8sRUFBRSxLQUFGLEdBQVUsRUFBRSxLQUFuQjtBQUNBLEVBRlUsQ0FBWDtBQUdBLEtBQUksT0FBTyxFQUFYO0FBQ0EsS0FBSSxNQUFNLEVBQVY7QUFDQSxLQUFJLEtBQUssTUFBTCxHQUFjLENBQWxCLEVBQXFCO0FBQ3BCLE1BQUksUUFBUSxLQUFLLENBQUwsQ0FBWjtBQUNBLE9BQUssSUFBSSxNQUFULElBQW1CLE1BQU0sSUFBekIsRUFBK0I7QUFDOUIsT0FBSSxFQUFFLFVBQVUsR0FBWixDQUFKLEVBQXNCO0FBQ3JCLFFBQUksTUFBSixJQUFjO0FBQ2IsV0FBTSxFQUFDLFFBQVEsTUFBVCxFQURPO0FBRWIsWUFBTyxFQUZNO0FBR2IsY0FBUztBQUhJLEtBQWQ7QUFLQTtBQUNEO0FBQ0QsT0FBSyxPQUFMLENBQWEsVUFBQyxHQUFELEVBQVM7QUFDckIsUUFBSyxJQUFMLENBQVUsSUFBSSxLQUFkO0FBQ0EsUUFBSyxJQUFJLE9BQVQsSUFBbUIsSUFBSSxJQUF2QixFQUE2QjtBQUM1QixRQUFJLFdBQVUsR0FBZCxFQUFtQjtBQUNsQixTQUFJLE9BQU8sSUFBSSxJQUFKLENBQVMsT0FBVCxDQUFYO0FBQ0EsU0FBSSxPQUFKLEVBQVksS0FBWixDQUFrQixJQUFsQixDQUF1QixLQUFLLEtBQTVCO0FBQ0EsU0FBSSxRQUFRLEtBQUssT0FBakI7QUFDQSxTQUFJLE1BQU07QUFDVCxZQUFNLFdBQVcsTUFBTSxJQUFqQixDQURHO0FBRVQsWUFBTSxXQUFXLE1BQU0sSUFBakI7QUFGRyxNQUFWO0FBSUEsU0FBSSxPQUFKLEVBQVksT0FBWixDQUFvQixJQUFwQixDQUF5QixHQUF6QjtBQUNBO0FBQ0Q7QUFDRCxHQWREO0FBZUE7QUFDRCxRQUFPO0FBQ04sUUFBTSxJQURBO0FBRU4sT0FBSztBQUZDLEVBQVA7QUFJQTs7QUFFRCxJQUFNLFNBQVMsMEtBQTBLLEtBQTFLLE1BQXFMLEdBQXJMLENBQXlMLFVBQUMsR0FBRDtBQUFBLGFBQVksR0FBWjtBQUFBLENBQXpMLEVBQTRNLE9BQTVNLEVBQWY7O0FBRUEsU0FBUyxRQUFULENBQWtCLElBQWxCLEVBQXdCLEdBQXhCLEVBQTZCO0FBQzVCLEtBQUksV0FBVyxFQUFmO0FBQ0EsS0FBSSxJQUFJLENBQVI7O0FBRjRCLDRCQUduQixNQUhtQjtBQUkzQixNQUFJLE9BQU8sRUFBWDtBQUNBLE1BQUksUUFBUSxDQUFaO0FBQ0EsTUFBSSxNQUFKLEVBQVksT0FBWixDQUFvQixPQUFwQixDQUE0QixVQUFDLElBQUQsRUFBTyxHQUFQLEVBQWU7QUFDMUMsWUFBUyxLQUFLLElBQWQ7QUFDQSxRQUFLLElBQUwsQ0FBVTtBQUNULE9BQUcsS0FBSyxHQUFMLENBRE07QUFFVCxPQUFHO0FBRk0sSUFBVjtBQUlBLEdBTkQ7QUFPQSxXQUFTLElBQVQsQ0FBYztBQUNiLFVBQU8sTUFETTtBQUViLGdCQUFhLE9BQU8sQ0FBUCxDQUZBO0FBR2IsU0FBTSxLQUhPO0FBSWIsMkJBQXdCLFVBSlg7QUFLYixTQUFNO0FBTE8sR0FBZDtBQU9BO0FBcEIyQjs7QUFHNUIsTUFBSyxJQUFJLE1BQVQsSUFBbUIsR0FBbkIsRUFBd0I7QUFBQSxRQUFmLE1BQWU7QUFrQnZCO0FBQ0QsS0FBSSxNQUFNLFNBQVMsY0FBVCxDQUF3QixPQUF4QixFQUFpQyxVQUFqQyxDQUE0QyxJQUE1QyxDQUFWO0FBQ0EsS0FBSSxRQUFRLElBQUksS0FBSixDQUFVLEdBQVYsRUFBZTtBQUMxQixjQUQwQjtBQUUxQixRQUFNO0FBQ0wsYUFBVTtBQURMLEdBRm9CO0FBSzFCLFdBQVM7QUFDUixlQUFZLEtBREo7QUFFUix3QkFBcUIsSUFGYjtBQUdSLFdBQVE7QUFDUDtBQURPLElBSEE7QUFNUixVQUFPO0FBQ04sYUFBUyxJQURIO0FBRU47QUFGTSxJQU5DO0FBVVIsV0FBUTtBQUNQLFdBQU8sQ0FBQztBQUNQLGNBQVMsSUFERjtBQUVQLG1CQUZPO0FBR1AsaUJBQVk7QUFDWCxlQUFTLElBREU7QUFFWCxtQkFBYTtBQUZGLE1BSEw7QUFPUCxZQUFPO0FBQ04sZ0JBQVUsa0JBQUMsRUFBRCxFQUFRO0FBQ2pCLGNBQU8sT0FBTyxFQUFQLEVBQVcsTUFBWCxDQUFrQixLQUFsQixDQUFQO0FBQ0E7QUFISztBQVBBLEtBQUQsQ0FEQTtBQWNQLFdBQU8sQ0FBQztBQUNQLGNBQVMsSUFERjtBQUVQLG1CQUZPO0FBR1AsaUJBQVk7QUFDWCxlQUFTLElBREU7QUFFWCxtQkFBYTtBQUZGLE1BSEw7QUFPUCxZQUFPO0FBQ04sZ0JBQVUsa0JBQUMsR0FBRCxFQUFTO0FBQ2xCLG9CQUFXLElBQUksT0FBSixDQUFZLENBQVosQ0FBWDtBQUNBO0FBSEs7QUFQQSxLQUFEO0FBZEEsSUFWQTtBQXNDUixhQUFVO0FBQ1QsV0FBTztBQUNOLGFBQVE7QUFERjtBQURFLElBdENGO0FBMkNSO0FBM0NRO0FBTGlCLEVBQWYsQ0FBWjtBQW1EQTs7QUFFRCxJQUFJLElBQUosRUFBVTtBQUNULFVBQVMsSUFBVCxHQUFnQixpQkFBaEIsR0FBb0MsSUFBcEMsQ0FBeUMsWUFBTTtBQUM5QyxhQUFXLElBQVgsRUFBaUIsVUFBQyxHQUFELEVBQVM7QUFDekIsT0FBSSxPQUFPLFlBQVksR0FBWixDQUFYO0FBQ0EsV0FBUSxHQUFSLENBQVksSUFBWjtBQUNBLFlBQVMsS0FBSyxJQUFkLEVBQW9CLEtBQUssR0FBekI7QUFDQSxHQUpEO0FBS0EsRUFORDtBQU9BIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIm1vZHVsZS5leHBvcnRzID0ge1xuICAgIGFwaUtleTogXCJBSXphU3lDR1dFcHZ1eTRzUFIzbjV4endmQVRMenlNRHZ3RTZ0T1lcIixcbiAgICBhdXRoRG9tYWluOiBcImlsbGlub2lzLXRlY2gtYWNtLmZpcmViYXNlYXBwLmNvbVwiLFxuICAgIGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vaWxsaW5vaXMtdGVjaC1hY20uZmlyZWJhc2Vpby5jb21cIixcbiAgICBwcm9qZWN0SWQ6IFwiaWxsaW5vaXMtdGVjaC1hY21cIixcbiAgICBzdG9yYWdlQnVja2V0OiBcImlsbGlub2lzLXRlY2gtYWNtLmFwcHNwb3QuY29tXCIsXG4gICAgbWVzc2FnaW5nU2VuZGVySWQ6IFwiMzQ0NTMzNzM0MzEwXCJcbn0iLCJsZXQgY29uZmlnID0gcmVxdWlyZSgnLi9jb25maWcnKTtcbmxldCBGaXJlYmFzZUFwcCA9IGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnKTtcbmxldCBkYiA9IEZpcmViYXNlQXBwLmRhdGFiYXNlKCk7XG5cbmNvbnN0IFBBUkFNUyA9IGdldFF1ZXJ5UGFyYW1zKGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCk7XG5jb25zdCBHQU1FID0gUEFSQU1TLmdhbWU7XG5cbmNvbnN0IFBJTksgPSBgI0VBMzhCOWA7XG5jb25zdCBQVVJQTEUgPSBgIzQyMkU2RWA7XG5cbmZ1bmN0aW9uIGdldFF1ZXJ5UGFyYW1zKHFzKSB7XG5cdHFzID0gcXMuc3BsaXQoJysnKS5qb2luKCcgJyk7XG5cdHZhciBwYXJhbXMgPSB7fSxcblx0XHR0b2tlbnMsXG5cdFx0cmUgPSAvWz8mXT8oW149XSspPShbXiZdKikvZztcblx0d2hpbGUgKHRva2VucyA9IHJlLmV4ZWMocXMpKSB7XG5cdFx0cGFyYW1zW2RlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMV0pXSA9IGRlY29kZVVSSUNvbXBvbmVudCh0b2tlbnNbMl0pO1xuXHR9XG5cdHJldHVybiBwYXJhbXM7XG59XG5cbmZ1bmN0aW9uIGdldFJlc3VsdHMoZ2FtZWlkLCBjYWxsYmFjaykge1xuXHRkYi5yZWYoYGx5ZnQvcmVzdWx0cy8ke2dhbWVpZH1gKS5vbmNlKCd2YWx1ZScsIChzbmFwKSA9PiB7XG5cdFx0bGV0IHZhbCA9IHNuYXAudmFsKCkgfHwge307XG5cdFx0Y2FsbGJhY2sodmFsKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldFRlYW1EYXRhKHJlcykge1xuXHRsZXQgaW5NYXAgPSByZXMgfHwge307XG5cdGxldCBzaW1zID0gT2JqZWN0LmtleXMoaW5NYXApLm1hcCgoa2V5KSA9PiByZXNba2V5XSkuc29ydCgoYSwgYikgPT4ge1xuXHRcdHJldHVybiBhLnN0YXJ0IC0gYi5zdGFydDtcblx0fSk7XG5cdGxldCB0aW1lID0gW107XG5cdGxldCBtYXAgPSB7fTtcblx0aWYgKHNpbXMubGVuZ3RoID4gMCkge1xuXHRcdGxldCBmaXJzdCA9IHNpbXNbMF07XG5cdFx0Zm9yIChsZXQgdGVhbWlkIGluIGZpcnN0LmRhdGEpIHtcblx0XHRcdGlmICghKHRlYW1pZCBpbiBtYXApKSB7XG5cdFx0XHRcdG1hcFt0ZWFtaWRdID0ge1xuXHRcdFx0XHRcdGluZm86IHt0ZWFtaWQ6IHRlYW1pZH0sXG5cdFx0XHRcdFx0dHJpcHM6IFtdLFxuXHRcdFx0XHRcdHJldmVudWU6IFtdXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0c2ltcy5mb3JFYWNoKChzaW0pID0+IHtcblx0XHRcdHRpbWUucHVzaChzaW0uc3RhcnQpO1xuXHRcdFx0Zm9yIChsZXQgdGVhbWlkIGluIHNpbS5kYXRhKSB7XG5cdFx0XHRcdGlmICh0ZWFtaWQgaW4gbWFwKSB7XG5cdFx0XHRcdFx0bGV0IHN0ZXAgPSBzaW0uZGF0YVt0ZWFtaWRdO1xuXHRcdFx0XHRcdG1hcFt0ZWFtaWRdLnRyaXBzLnB1c2goc3RlcC50cmlwcyk7XG5cdFx0XHRcdFx0bGV0IGluUmV2ID0gc3RlcC5yZXZlbnVlO1xuXHRcdFx0XHRcdGxldCByZXYgPSB7XG5cdFx0XHRcdFx0XHRseWZ0OiBwYXJzZUZsb2F0KGluUmV2Lmx5ZnQpLFxuXHRcdFx0XHRcdFx0dGF4aTogcGFyc2VGbG9hdChpblJldi50YXhpKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtYXBbdGVhbWlkXS5yZXZlbnVlLnB1c2gocmV2KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdHJldHVybiB7XG5cdFx0dGltZTogdGltZSxcblx0XHRtYXA6IG1hcFxuXHR9O1xufVxuXG5jb25zdCBDT0xPUlMgPSBgI2U2MTk0Yi0jM2NiNDRiLSNmZmUxMTktIzAwODJjOC0jZjU4MjMxLSM5MTFlYjQtIzQ2ZjBmMC0jZjAzMmU2LSNkMmY1M2MtI2ZhYmViZS0jMDA4MDgwLSNlNmJlZmYtI2FhNmUyOC0jZmZmYWM4LSM4MDAwMDAtI2FhZmZjMy0jODA4MDAwLSNmZmQ4YjEtIzAwMDA4MC0jODA4MDgwLSMwMDAwMDBgLnNwbGl0KGAtYCkubWFwKChoZXgpID0+IGAke2hleH1gKS5yZXZlcnNlKCk7XG5cbmZ1bmN0aW9uIHBsb3RNYWluKHRpbWUsIG1hcCkge1xuXHRsZXQgZGF0YXNldHMgPSBbXTtcblx0bGV0IGkgPSAwO1xuXHRmb3IgKGxldCB0ZWFtaWQgaW4gbWFwKSB7XG5cdFx0bGV0IGxpbmUgPSBbXTtcblx0XHRsZXQgdG90YWwgPSAwO1xuXHRcdG1hcFt0ZWFtaWRdLnJldmVudWUuZm9yRWFjaCgoc3RlcCwgaWR4KSA9PiB7XG5cdFx0XHR0b3RhbCArPSBzdGVwLmx5ZnQ7XG5cdFx0XHRsaW5lLnB1c2goe1xuXHRcdFx0XHR4OiB0aW1lW2lkeF0sXG5cdFx0XHRcdHk6IHRvdGFsXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRkYXRhc2V0cy5wdXNoKHtcblx0XHRcdGxhYmVsOiB0ZWFtaWQsXG5cdFx0XHRib3JkZXJDb2xvcjogQ09MT1JTW2ldLFxuXHRcdFx0ZmlsbDogZmFsc2UsXG5cdFx0XHRjdWJpY0ludGVycG9sYXRpb25Nb2RlOiAnbW9ub3RvbmUnLFxuXHRcdFx0ZGF0YTogbGluZVxuXHRcdH0pO1xuXHRcdGkrKztcblx0fVxuXHRsZXQgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Bsb3QxJykuZ2V0Q29udGV4dCgnMmQnKTtcblx0bGV0IGNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuXHRcdHR5cGU6IGBsaW5lYCxcblx0XHRkYXRhOiB7XG5cdFx0XHRkYXRhc2V0czogZGF0YXNldHNcblx0XHR9LFxuXHRcdG9wdGlvbnM6IHtcblx0XHRcdHJlc3BvbnNpdmU6IGZhbHNlLFxuXHRcdFx0bWFpbnRhaW5Bc3BlY3RSYXRpbzogdHJ1ZSxcblx0XHRcdGxlZ2VuZDoge1xuXHRcdFx0XHRwb3NpdGlvbjogYHJpZ2h0YCxcblx0XHRcdH0sXG5cdFx0XHR0aXRsZToge1xuXHRcdFx0XHRkaXNwbGF5OiB0cnVlLFxuXHRcdFx0XHR0ZXh0OiBgUmV2ZW51ZSBvdmVyIFRpbWVgXG5cdFx0XHR9LFxuXHRcdFx0c2NhbGVzOiB7XG5cdFx0XHRcdHhBeGVzOiBbe1xuXHRcdFx0XHRcdGRpc3BsYXk6IHRydWUsXG5cdFx0XHRcdFx0dHlwZTogYGxpbmVhcmAsXG5cdFx0XHRcdFx0c2NhbGVMYWJlbDoge1xuXHRcdFx0XHRcdFx0ZGlzcGxheTogdHJ1ZSxcblx0XHRcdFx0XHRcdGxhYmVsU3RyaW5nOiAnVGltZSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRpY2tzOiB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjazogKHRzKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBtb21lbnQodHMpLmZvcm1hdCgnTS9EJyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XSxcblx0XHRcdFx0eUF4ZXM6IFt7XG5cdFx0XHRcdFx0ZGlzcGxheTogdHJ1ZSxcblx0XHRcdFx0XHR0eXBlOiBgbGluZWFyYCxcblx0XHRcdFx0XHRzY2FsZUxhYmVsOiB7XG5cdFx0XHRcdFx0XHRkaXNwbGF5OiB0cnVlLFxuXHRcdFx0XHRcdFx0bGFiZWxTdHJpbmc6ICdSZXZlbnVlICgkKSdcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHRpY2tzOiB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjazogKHJldikgPT4ge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gYCQke3Jldi50b0ZpeGVkKDApfWA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XVxuXHRcdFx0fSxcblx0XHRcdGVsZW1lbnRzOiB7XG5cdFx0XHRcdHBvaW50OiB7XG5cdFx0XHRcdFx0cmFkaXVzOiAwXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRtdWx0aVRvb2x0aXBUZW1wbGF0ZTogYDwlJT1kYXRhc2V0TGFiZWwlPjogJDwlJT12YWx1ZSU+YFxuXHRcdH1cblx0fSk7XG59XG5cbmlmIChHQU1FKSB7XG5cdGZpcmViYXNlLmF1dGgoKS5zaWduSW5Bbm9ueW1vdXNseSgpLnRoZW4oKCkgPT4ge1xuXHRcdGdldFJlc3VsdHMoR0FNRSwgKHJlcykgPT4ge1xuXHRcdFx0bGV0IGRhdGEgPSBnZXRUZWFtRGF0YShyZXMpO1xuXHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRwbG90TWFpbihkYXRhLnRpbWUsIGRhdGEubWFwKTtcblx0XHR9KTtcblx0fSk7XG59XG4iXX0=\n"]}